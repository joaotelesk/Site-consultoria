// Components
import { CardBlogCarousel } from "@/components/CardBlogCarousel/CardBlog";
import { Post } from "@/interfaces";
import { useServiceQuery } from "@/Utilities/Services";
import Head from "next/head";
import Image from "next/image";
import Link from "next/link";

// Utilities
// Interfaces
interface BlogProps {
  blogDataDicas: Post[];
  blogDataItalia: Post[];
  blogDataPortugal: Post[];
}

export default function Blog({
  blogDataDicas,
  blogDataItalia,
  blogDataPortugal,
}: BlogProps) {
  console.log(blogDataDicas);
  return (
    <>
      <Head>
        <title>Blog</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className="w-full min-h-screen py-0">
        <section className=" text-center lg:text-start items-center bg-blog bg-cover pt-28 lg:pt-0 lg:mt-28">
          <div className="container grid grid-cols-1 lg:grid-cols-2 lg:gap-x-11">
            <div className="py-7 lg:py-16 flex flex-col">
              <div className=" flex flex-col lg:flex-row items-center lg:items-end gap-5">
                <h1 className="mt-4 text-3xl font-medium  lg:text-5xl text-green-500 flex gap-4 order-2 lg:order-1">
                  Blog Imigrei
                </h1>
                <Image
                  src="/Home/bandeiras.png"
                  alt="Bandeiras de portugal e italia"
                  width={75}
                  height={35}
                  className="mx-auto lg:ml-0 order-1 lg:order-2"
                />
              </div>
              <p className="mx-auto mt-4 lg:mt-6 text-green-300 text-sm lg:text-xl max-w-md lg:ml-0">
                Dicas e conteúdo de qualidade criado por quem te deseja a melhor
                experiência de imigração para a Itália e Portugal!
              </p>
            </div>
            <Image
              src="/Blog/banner.png"
              alt="Imagem banner principal"
              width={352}
              height={283}
              className="self-end mx-auto"
            />
          </div>
        </section>

        <section className="my-16">
          <div className="flex flex-col container items-center lg:items-stretch">
            <div className="text-center lg:text-start flex items-center">
              <div className="max-w-3xl mx-auto mb-14 lg:ml-0">
                <span className=" text-green-500 font-medium">
                  Dicas Imigrei
                </span>
                <h2 className="mt-2 text-2xl sm:text-4xl text-black-400 font-medium">
                  Conteúdo rápido e informativo
                </h2>
              </div>
              <Link
                href="/blog/dicas"
                className="hidden lg:block button ml-auto"
              >
                Ver Todos
              </Link>
            </div>
            <div className="container lg:px-0">
              <CardBlogCarousel blogData={blogDataDicas} />
            </div>

            <Link href="/blog/dicas" className="lg:hidden button mt-5 ">
              Ver Todos
            </Link>
          </div>
        </section>
        <section className="my-16">
          <div className="flex flex-col container items-center lg:items-stretch">
            <div className="text-center lg:text-start flex items-center">
              <div className="max-w-3xl mx-auto mb-14 lg:ml-0">
                <span className=" text-green-500 font-medium">Portugal</span>
                <h2 className="mt-2 text-2xl sm:text-4xl text-black-400 font-medium">
                  Portugal, aí vamos nós!
                </h2>
              </div>
              <Link
                href="/blog/portugal"
                className="hidden lg:block button ml-auto"
              >
                Ver Todos
              </Link>
            </div>
            <div className="container lg:px-0">
              <CardBlogCarousel blogData={blogDataPortugal} />
            </div>

            <Link href="/blog/portugal" className="lg:hidden button mt-5 ">
              Ver Todos
            </Link>
          </div>
        </section>
        <section className="my-16">
          <div className="flex flex-col container items-center lg:items-stretch">
            <div className="text-center lg:text-start flex items-center">
              <div className="max-w-3xl mx-auto mb-14 lg:ml-0">
                <span className=" text-green-500 font-medium">Portugal</span>
                <h2 className="mt-2 text-2xl sm:text-4xl text-black-400 font-medium">
                  Italia, aí vamos nós!
                </h2>
              </div>
              <Link
                href="/blog/italia"
                className="hidden lg:block button ml-auto"
              >
                Ver Todos
              </Link>
            </div>
            <div className="container lg:px-0">
              <CardBlogCarousel blogData={blogDataItalia} />
            </div>

            <Link href="/blog/italia" className="lg:hidden button mt-5 ">
              Ver Todos
            </Link>
          </div>
        </section>
      </main>
    </>
  );
}

export async function getStaticProps() {
  const { getFourPostsByType } = await useServiceQuery();

  const postTypeResponseDicas = await getFourPostsByType("dicas");
  const postTypeResponseItalia = await getFourPostsByType("italia");
  const postTypeResponsePortugal = await getFourPostsByType("portugal");

  if (!postTypeResponseDicas) {
    return {
      notFound: true,
    };
  }

  return {
    props: {
      blogDataDicas: postTypeResponseDicas,
      blogDataItalia: postTypeResponseItalia,
      blogDataPortugal: postTypeResponsePortugal,
    },
    revalidate: 60 * 60 * 1, // 1 hour
  };
}
